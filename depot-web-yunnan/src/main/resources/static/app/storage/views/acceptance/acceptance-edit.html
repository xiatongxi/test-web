<div id="content" style=" border-width:5px; margin-left:2%;position:relative;margin-right:2%;">
    <section id="widget-grid" widget-grid>
        <div class="row">
            <article class="col-sm-12 col-md-12 col-lg-12">
                <div jarvis-widget id="form-grid-widget"
                     data-widget-colorbutton="false" data-widget-editbutton="false"
                     data-widget-custombutton="false">
                    <div>
                        <div class="widget-body no-padding">
                            <form id="plan-form" class="smart-form ng-pristine ng-valid" data-validator-option="validateOptions" novalidate="novalidate" style=" border-width:5px; margin-left:2%;position:relative;margin-right:2%;">
                                <header>
                                    <a href-void class="btn btn-default btn-xs" ng-click="retList()">
                                        <i class="fa fa-angle-left"></i>&nbsp;返回&nbsp;
                                    </a>
                                    &nbsp;<strong>申请验收</strong>
                                    <span class="pull-right font-xs">带*的部分必须填写</span>
                                </header>

                                <fieldset>
                                        <table class="table table-striped table-bordered table-hover" width="100%">
                                            <!--第一个tr开始 -->
                                            <tr>
                                                <th rowspan="5" width='10%'>
                                                    <label class="label" style="margin-top: 50%;text-align: center;">基本信息</label>
                                                </th>
                                                <th width='11%'>
                                                    <label class="label" style="margin-top: 9px;text-align: center;">申请验收编号<span style="color: red;">*</span></label>
                                                </th>
                                                <th width='20%'>
                                                    <section>
                                                        <label class="input">
                                                            <input class="form-control" type="text" ng-model="plan.acceptanceNumber" name="acceptanceNumber"
                                                                   ng-readonly="true"  required>
                                                            <!-- <b class="tooltip tooltip-bottom-right">2-20位字母、数字和下划线</b> -->
                                                        </label>
                                                    </section>
                                                </th>
                                                <th width='10%'>
                                                    <label class="label" style="margin-top: 9px;text-align: center;">计划编号<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
                                                </th>
                                                <th width='20%'>
                                                    <section >
                                                        <i class="icon-append fa fa-times" ng-click="removePlan()"></i>
                                                        <input class="form-control" type="text" ng-model="plan.planNumber"
                                                               ng-readonly="true" ng-disabled="isNotEdit"
                                                               ng-click="getPlan()" placeholder="请选择计划"
                                                               minlength="2" maxlength="20" required>
                                                    </section>
                                                </th>
                                                <th width='10%'>
                                                    <label class="label" style="margin-top: 9px;text-align: center;">计划名称<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
                                                </th>
                                                <th width='20%'>
                                                    <section>
                                                        <label class="input">
                                                            <input class="form-control" type="text" ng-model="plan.planTitle" ng-disabled="true" name="planTitle"
                                                                   required>
                                                        </label>
                                                    </section>
                                                </th>
                                            </tr>
                                            <!--第一个tr结束 -->
                                            <!--第二个tr开始 -->
                                            <tr>
                                                <th width='10%'>
                                                    <label class="label" style="margin-top: 9px;text-align: center;">计划文号</label>
                                                </th>
                                                <th width='20%'>
                                                    <section>
                                                        <label class="input">
                                                            <input class="form-control" type="text" ng-model="plan.referenceNumber" ng-disabled="true" name="referenceNumber">
                                                        </label>
                                                    </section>
                                                </th>
                                                <th>
                                                    <label label class="label" style="margin-top: 9px;text-align: center;">计划类型<span style="color: red;">*</span></label>
                                                </th>
                                                <th>
                                                    <section>
                                                        <label class="select">
                                                            <select ng-model="plan.executeType" name="executeType" ng-disabled="true"
                                                                    ng-options="enum.enumid as enum.enumname for enum in dicDataList[1050]" required >
                                                                <option value="">--请选择--</option>
                                                            </select><i></i>
                                                        </label>
                                                    </section>
                                                </th>
                                                <th>
                                                    <label label class="label" style="margin-top: 9px;text-align: center;">创建时间<span style="color: red;">*</span></label>
                                                </th>
                                                <th>
                                                    <section>
                                                        <label class="input" style="margin-top: 9px;">
                                                            <input type="text" ng-model="plan.createTime" name="createTime" data-smart-datepicker ng-disabled="true"
                                                                   placeholder="创建时间" required>
                                                        </label>
                                                    </section>
                                                </th>
                                            </tr>
                                            <!--第二个tr结束 -->
                                        </table>
                                </fieldset>

                                <header>
                                    <h3>
                                        <strong>质检信息</strong>
                                        <a class="btn btn-primary" ng-hide="isNotEdit" ng-click="addRow()"><i class="fa fa-plus"></i>质检</a>
                                    </h3>
                                </header>
                                <fieldset>
                                    <table class="table table-striped table-bordered table-hover"  >
                                        <thead>
                                        <tr>
                                            <th data-hide="expand">序号</th>
                                            <th data-class="expand">仓房名称</th>
                                            <th data-class="expand">货位名称</th>
                                            <th data-class="expand">检查类型</th>
                                            <th data-class="expand">储粮性质</th>
                                            <th data-class="expand">粮食品种</th>
                                            <th data-hide="phone">检验人</th>
                                            <th data-hide="phone,tablet">检验结果</th>
                                            <th data-hide="phone,tablet">检查日期</th>
                                            <th data-hide="phone,tablet">操作</th>
                                        </tr>
                                        </thead>

                                        <tbody>
                                        <tr ng-repeat="detailInfo in addedDetail">
                                            <td>{{$index + 1}}</td>
                                            <td>{{detailInfo.storehouseName}}</td>
                                            <td>{{detailInfo.wareHouseName}}</td>
                                            <td>验收</td>
                                            <td>{{dicData[detailInfo.quality]}}</td>
                                            <td>{{dicData[detailInfo.subType]}}</td>
                                            <td>{{detailInfo.checker}}</td>
                                            <td >
                                                <span ng-if="detailInfo.checkResult=='0'">合格</span>
                                                <span ng-if="detailInfo.checkResult=='1'">不合格</span>
                                            </td>
                                            <td>{{detailInfo.checkTime | date:'yyyy-MM-dd'}}</td>
                                            <td>
                                                <div ng-switch="{{ isNotEdit }}">
                                                    <div ng-switch-when="true">
                                                        <a class="btn btn-primary" ng-click="showRow(detailInfo.id)">查看</a>
                                                    </div>
                                                    <div ng-switch-default>
                                                        <a class="btn btn-primary" ng-click="deleteRow(detailInfo)">删除</a>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        </tbody>
                                    </table>
                                </fieldset>

                                <header>
                                    <h3>
                                        <strong>附件信息</strong>
                                        <a href-void class="btn btn-primary" ng-hide="isNotEdit" ng-click="addFile()"> <i class="fa fa-plus"></i>文件 </a>
                                    </h3>
                                </header>
                                <fieldset>

                                    <table ng-hide="isNotEdit" class="table table-striped table-bordered table-hover" ng-repeat="linenumber in linenumbers" ng-click="clickFileInput(linenumber)" >
                                        <!--第四3个tr开始 -->
                                        <tr>
                                            <th width='10%' >
                                                <label class="label" style="margin-top: 9px;text-align: center;">附件</label>
                                            </th>
                                            <th colspan="4">
                                                <section>
                                                    <div class="input input-file" style="margin-top: 9px; text-align: center; margin-right: 22px;">
											            <span class="button" >
											            	<input type="file" nv-file-select="" uploader="uploader" accept="*" options="id" id="fileInputId{{linenumber}}"
                                                                   onchange="if (this.value != '')this.parentNode.nextSibling.value = this.value">
											                	上传
											            </span><input type="text" name="imgUrl" placeholder="" readonly="">
                                                    </div>
                                                </section>
                                            </th>

                                            <th width='10%'>
                                                <div class="input input-file" style="margin-top: 9px; text-align: center; margin-right: 16px;">
														<span class="button"  ng-click="deleteFileByLinenumber(linenumber)">删除
											            </span>
                                                </div>
                                            </th>

                                        </tr>
                                        <!--第四3个tr结束 -->
                                    </table>

                                    <!--回显文件的表格  -->

                                    <table class="table table-striped table-bordered table-hover" ng-repeat="file in fileList" >
                                        <!--第四3个tr开始 -->
                                        <tr>
                                            <th width='10%' >
                                                <label class="label" style="margin-top: 9px;text-align: center;">附件</label>
                                            </th>
                                            <th colspan="5">
                                                <section >
                                                    <input class="form-control" type="text" ng-model="file.originalFileName" readonly="">
                                                </section>
                                            </th>
                                            <th width='10%' >
                                                <section style="margin-top: 9px; text-align: center; margin-right: 22px;">
                                                    <a class="btn btn-default" href-void ng-click="download(file.filePath, file.originalFileName)"><i class="fa fa-download"></i>下载</a>
                                                </section>
                                            </th>
                                        </tr>
                                        <!--第四3个tr结束 -->
                                    </table>
                                </fieldset>

                                <footer class="text-align-center" >
                                    <button type="button" class="btn btn-default" ng-click="retList()">取消</button>
                                    <button type="button" class="btn btn-primary" ng-hide="isNotEdit" ng-click="save()">提交</button>
                                </footer>
                            </form>
                        </div>
                    </div>
                </div>
            </article>
        </div>
    </section>
    <form id="download-form" method="post" target="_blank" style=" border-width:5px; margin-left:2%;position:relative;margin-right:2%;">
        <input type="hidden" name="filePath" id="filePath">
        <input type="hidden" name="originalFileName" id="originalFileName">
        <input type="hidden" name="type" id="type">
    </form>
</div>

