<!-- MAIN CONTENT -->
<div id="content">

	<!-- widget grid -->
	<section id="widget-grid" widget-grid>

		<!-- START ROW -->
		<div class="row">

			<!-- NEW COL START -->
			<article class="col-sm-12 col-md-12 col-lg-12">

				<!-- Widget ID (each widget will need unique ID)-->
				<div jarvis-widget id="form-grid-widget"
					data-widget-colorbutton="false" data-widget-editbutton="false"
					data-widget-custombutton="false">

					<!-- widget div-->
					<div>
						<!-- widget content -->
						<div class="widget-body no-padding">
							<form id="changeStore-form" name='changeStore-form'
								class="smart-form ng-pristine ng-valid"
								ng-submit='changeStore-form.$valid&&save(changestorage)'
								novalidate="novalidate">
								<header>
									<a href-void class="btn btn-default btn-xs" ng-click="returnTop()">
										<i class="fa fa-angle-left"></i>&nbsp;返回&nbsp;
									</a>
									&nbsp;<strong>仓房基础信息</strong>
									<span class="pull-right font-xs">带*的部分必须填写</span>
								</header>

								<fieldset>
									<table class="table table-striped table-bordered table-hover" width="100%">
										<tr>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">倒仓申请单号<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
											</th>
											<th>
												<label class="input">
													<input type="text" ng-model="changestorage.businessNo" required ng-readonly="isNotEdit">
												</label>
											</th>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">申请倒仓企业<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
											</th>
											<th>
												<label class="input">
													<input type="text"  ng-model="changestorage.applyUnitName" required ng-readonly="isNotEdit">
												</label>
											</th>
											<th>
												<label class="label" disabled="true" style="margin-top: 9px;text-align: center;">倒出总数量</label>
											</th>
											<th>
												<label class="input">
													<input type="text" ng-model="changestorage.planPourOutSum"
													name="planPourOutSum" maxlength="20" required ng-readonly="true">
												</label>
											</th>
										</tr>
										<tr>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">倒入总数量</label>
											</th>
											<th>
												<label class="input">
													<input type="text" ng-model="changestorage.planPourInSum" ng-readonly="true" />
												</label>
											</th>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">计划开始日期</label>
											</th>
											<th>
												<label class="input">
													<input type="text" ng-model="changestorage.planStartDate"
													class="form-control datepicker" data-smart-datepicker
													name="planStartDate" ng-disabled="isNotEdit">
												</label>
											</th>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">计划结束日期</label>
											</th>
											<th>
												<label class="input">
													<input type="text" ng-model="changestorage.planEndDate"
													class="form-control datepicker" data-smart-datepicker
													name="planEndDate" ng-disabled="isNotEdit">
												</label>
											</th>
										</tr>
										<tr>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">承储企业负责人<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
											</th>
											<th>
												<label class="input">
													<input type="text" ng-model="changestorage.storageUnnitPerson" name="storageUnnitPerson" ng-readonly="isNotEdit">
												</label>
											</th>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">申请日期</label>
											</th>
											<th>
												<label class="input">
													<input type="text" ng-model="changestorage.applyTime"
													class="form-control datepicker" data-smart-datepicker
													name="applyTime" ng-disabled="isNotEdit">
												</label>
											</th>
										</tr>
									</table>
								</fieldset>
								<header>
									<h3>
										<strong>倒仓信息</strong>&nbsp;&nbsp; <a
										class="btn btn-primary"
										ng-click="addRow()" ng-hide="isEdit"><i class="fa fa-plus"></i>新增</a>
									</h3>
								</header>
								<fieldset>
									<div class="col-xs-12 col-sm-12">
										<table class="table table-striped table-bordered table-hover" width="100%">
											<tr>
												<th colspan="6">
													<label class="label" style="margin-top: 13px;text-align: center;">倒出</label>
												</th>
												<th colspan="5">
													<label class="label" style="margin-top: 5px;text-align: center;">倒入</label>
												</th>
											</tr>
                                			<table class="table table-striped table-bordered table-hover"  >
												<thead>
												<tr>
													<th data-hide="expand" align="center" width="5%">仓房名称</th>
													<th data-class="expand" align="center" width="5%">货位名称</th>
													<th data-class="expand" align="center" width="6%">粮油品种</th>
													<th data-class="expand" align="center" width="5%">计划倒出数量</th>
													<th data-hide="expand" align="center" width="6%">入仓时间</th>
													<th data-hide="expand" align="center" width="7%">存储方式</th>
													<th data-hide="expand" align="center" width="8%">仓房名称</th>
													<th data-hide="expand" align="center" width="8%">货位名称</th>
													<th data-hide="expand" align="center" width="9%">计划倒入数量</th>
													<th data-hide="expand" align="center" width="9%">存储方式</th>
													<th data-hide="expand" align="center" width="8%" ng-hide="isNotEdit">操作</th>
												</tr>
												</thead>
												<tbody>
												<tr ng-repeat="changestorageDetail in addDcsl">
													<td>{{storehouseObj[changestorageDetail.houseId].storehouseName}}</td>
													<td>{{wares[changestorageDetail.wareId].warehouseName}}</td>
													<td>{{dicData[changestorageDetail.lspz]}}</td>
													<td>{{changestorageDetail.pourOutNum}}</td>
													<td>{{changestorageDetail.rksj}}</td>
													<td>{{dicData[changestorageDetail.ccfs]}}</td>
													<td>{{storehouseObj[changestorageDetail.storehouseId].storehouseName}}</td>
													<td>{{wares[changestorageDetail.warehouseId].warehouseName}}</td>
													<td>{{changestorageDetail.pourInNum}}</td>
													<td>{{dicData[changestorageDetail.keepingWay]}}</td>
													<td ng-hide="isNotEdit">
														<a class="btn btn-primary" ng-hide="isNotEdit" ng-click="editRow(changestorageDetail)">编辑</a>
	                                                	<a class="btn btn-primary" ng-hide="isNotEdit" ng-click="delRow(changestorageDetail)">删除</a>
													</td>
												</tr>
												</tbody>
		                             </table>
										</table>
									</div>
								</fieldset>
                                        <fieldset>
                                            <section>
                                            <header>倒仓原因</header>
                                                <label class="textarea">
                                                    <textarea class="form-control" ng-model="changestorage.changeReason" ng-readonly="isNotEdit" name="changeReason" rows="4" data-bv-field="review"></textarea>
                                                </label>
                                            </section>
                                        </fieldset>
                                <header>
                                	<h3>
                                		<strong>附件信息</strong>
                                		<a href-void class="btn btn-primary" ng-click="addFile()"> <i class="fa fa-plus"></i>文件 </a>
                               		</h3>
                          		</header>
					            <fieldset>
						            
                                	<table ng-hide="isNotEdit" class="table table-striped table-bordered table-hover" ng-repeat="linenumber in linenumbers" ng-click="clickFileInput(linenumber)" >
		                                <!--第四3个tr开始 -->
										<tr>
											<th width='10%' >
												<label class="label" style="margin-top: 9px;text-align: center;">附件</label>
											</th>
											<th colspan="4">
												<section>
									            	<div class="input input-file" style="margin-top: 9px; text-align: center; margin-right: 22px;">
											            <span class="button" >
											            	<input type="file" nv-file-select="" uploader="uploader" accept="*" options="id" id="fileInputId{{linenumber}}"
											            		onchange="if (this.value != '')this.parentNode.nextSibling.value = this.value">
											                	上传
											            </span><input type="text" name="imgUrl" placeholder="" readonly="">
										        	</div>
									            </section>
											</th>
											<th width='10%' class="text-align-center">
													<div class="input input-file" style="margin-top: 9px; text-align: center; margin-right: 16px;">
														<span class="button"  ng-click="showFileByLinenumber(linenumber)">预览
											            </span>
													</div>
													<!-- <button type="button" style="margin-top: 9px; text-align: center; margin-right: 22px;" class="btn btn-primary" ng-click="deleteFileByLinenumber(linenumber)">删除
													</button> -->
											</th>
											
											<th width='10%'>
	                                                <!-- <span class="button" style="margin-top: 9px; text-align: center; margin-right: 22px;" ng-click="deleteFileByLinenumber(linenumber)">删除
										            </span> -->
										            <div class="input input-file" style="margin-top: 9px; text-align: center; margin-right: 16px;">
														<span class="button"  ng-click="deleteFileByLinenumber(linenumber)">删除
											            </span>
													</div>
											</th>
											
										</tr>
										<!--第四3个tr结束 -->
		                             </table>
                                
                                	<!--回显文件的表格  -->
                                	
                                	<table class="table table-striped table-bordered table-hover" ng-repeat="file in fileList" >
		                                <!--第四3个tr开始 -->
										<tr>
											<th width='10%' >
												<label class="label" style="margin-top: 9px;text-align: center;">附件</label>
											</th>
											<th colspan="5">
												<section >
										            <input class="form-control" type="text" ng-model="file.originalFileName" readonly="">
		                                		</section>
											</th>
											<th width='10%' >
												<section style="margin-top: 9px; text-align: center; margin-right: 22px;">
							                        <a class="btn btn-default" href-void ng-click="download(file.filePath, file.originalFileName)"><i class="fa fa-download"></i>下载</a>
		                                		</section>
											</th>
											
											<th width='10%'>
												<section style="margin-top: 9px; text-align: center; margin-right: 22px;">
							                        <a class="btn btn-default" href-void ng-click="showFile(file.filePath)"><i class="fa fa-download"></i>预览</a>
		                                		</section>
											</th>
											<th width='10%'>
												<section  ng-hide="isNotEdit" style="margin-top: 9px; text-align: center; margin-right: 22px;">
							                        <a class="btn btn-default" href-void ng-click="deleteFile(file)"><i class="fa fa-trash-o"></i>删除</a>
		                                		</section>
											</th>
											
										</tr>
										<!--第四3个tr结束 -->
		                             </table>
		                             </fieldset>
									<fieldset ng-hide="Edit">
                                            <section>
                                            <header>审批意见</header>
                                                <label class="textarea">
                                                    <textarea class="form-control" ng-model="changestorage.applyIeda" name="applyIeda" ng-readonly="isNotEdit" rows="4" data-bv-field="review"></textarea>
                                                </label>
                                            </section>
                                    </fieldset>
								<footer class="modal-footer text-align-center">
									<button ng-click="returnTop()" class="btn btn-default btn-lg" data-dismiss="modal">取消</button>
									<!-- <button ng-click="up(changestorage.businessNo)" type="button" class="btn btn-primary btn-lg" ng-hide="isNotEdit">提交</button> -->
									<button ng-click="save()" type="button" class="btn btn-primary btn-lg" ng-hide="isNotEdit">保存</button>
								</footer>
							</form>
						</div>
					</div>
			</article>
		</div>
	</section>
</div>