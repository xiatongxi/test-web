<!-- MAIN CONTENT -->
<div id="content" style=" border-width:5px; margin-left:2%;position:relative;margin-right:2%;">
    <section id="widget-grid" widget-grid>
        <div class="row">
            <article class="col-sm-12 col-md-12 col-lg-12">
                <!-- Widget ID (each widget will need unique ID)-->
                <div jarvis-widget id="form-grid-widget"
                    data-widget-colorbutton="false" data-widget-editbutton="false"
                    data-widget-custombutton="false">
                    <!-- widget div-->
                    <div>
                        <!-- widget content -->
                        <div class="widget-body no-padding">
                            <form id="contract-form" class="smart-form ng-pristine ng-valid" data-validator-option="validateOptions" novalidate="novalidate" style=" border-width:5px; margin-left:2%;position:relative;margin-right:2%;">
                                <header>
									<a href-void class="btn btn-default btn-xs" ng-click="retList()">
										<i class="fa fa-angle-left"></i>&nbsp;返回&nbsp;
									</a>
									&nbsp;<strong>合同变更详情</strong>
									<span class="pull-right font-xs">带*的部分必须填写</span>
								</header>
                                <fieldset>
                                	<table style="width:70%; border-width:5px; margin-left:15%;position:relative;margin-right:15%;">
                                	<table class="table table-striped table-bordered table-hover" width="100%">
                                		<!--第一个tr开始 -->
										<tr>
											<th rowspan="3" width='10%'>
												<label class="label" style="margin-top: 50%;text-align: center;">基本信息</label>
											</th>
											<th width='10%'>
												<label class="label" style="margin-top: 9px;text-align: center;">合同编号<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
											</th>
											<th width='20%'>
												<section>
		                                            <label class="input"> 
		                                                <input class="form-control" type="text" ng-model="contract.contractNumber" name="contractNumber" ng-readonly="true" placeholder="" 
		                                                minlength="2" maxlength="20" required>
		                                            </label>
		                                        </section>
											</th>
											<th width='10%'>
												<label class="label" style="margin-top: 9px;text-align: center;">合同类型<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
											</th>
											<th width='20%'>
												<section>
		                                            <label class="select"> 
		                                                <select ng-model="contract.contractType" ng-disabled="true" name="contractType" 
		                                                ng-options="enum.enumid as enum.enumname for enum in dicDataList[1047]" required >
		                                                	<option value="">--请选择--</option><i></i>
		                                                </select><i></i>
		                                            </label>
		                                        </section>
											</th>
											<th width='10%'>
												<label class="label" style="margin-top: 9px;text-align: center;">中转方式<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
											</th>
											<th width='20%'>
												<section>
		                                            <label class="select"> 
		                                                <select ng-model="contract.customerId"  name="customerId" 
		                                                ng-options="enum.enumid as enum.enumname for enum in dicDataList[7026]" 
		                                                required ng-readonly="isNotEdit">
		                                                	<option value="">--请选择--</option><i></i>
		                                                </select><i></i>
		                                            </label>
		                                        </section>
											</th>
											
										</tr>
										<!--第一个tr结束 -->
										<!--第二个tr开始 -->
										<tr>
										    <th>
												<label label class="label" style="margin-top: 9px;text-align: center;">合同名称<span style="color: red;">*</span></label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input class="form-control" type="text" ng-model="contract.contractTitle" name="contractTitle" ng-readonly="isNotEdit" placeholder="合同标题" 
		                                                minlength="2" maxlength="20" required>
		                                            </label>
		                                        </section>
											</th>
											<th>
												<!-- <label label class="label" style="margin-top: 9px;text-align: center;">签订人<span style="color: red;">*</span></label> -->
												<label label class="label" style="margin-top: 9px;text-align: center;">合同生效日期</label>
											</th>
											<th>
												<section>
		                                            <label class="input">
		                                                <input type="text" ng-model="contract.enableDate" ng-change="changeDate()" name="enableDate" class="form-control datepicker" data-smart-datepicker ng-readonly="true" ng-disabled="isNotEdit">
		                                            </label>
		                                        </section>
											</th>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">合同截止日期</label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input type="text" ng-model="contract.signingTime" ng-change="changeDate()" name="signingTime" class="form-control datepicker"
		                                                data-smart-datepicker ng-readonly="true" ng-disabled="isNotEdit" required>
		                                            </label>
		                                        </section>
											</th>
											
										</tr>
										<!--第二个tr结束 -->
										<!--第三个tr开始 -->
										<tr>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">签订日期<span style="color: red;">*</span></label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input type="text" ng-model="contract.signingTime" ng-change="changeDate()" name="signingTime" class="form-control datepicker"
		                                                data-smart-datepicker ng-readonly="true" ng-disabled="isNotEdit" required>
		                                            </label>
		                                        </section>
											</th>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">签订人<span style="color: red;">*</span></label>
											</th>
											<th>
												<section>
				                                    <label class="select"> 
		                                                <select ng-model="contract.signingMan" ng-disabled="isNotEdit" name="signingMan" 
		                                                ng-options="userInfo.userId as userInfo.realName for userInfo in userInfoList" required>
		                                                	<option value="">--请选择--</option>
		                                                </select>
		                                            </label>
				                                </section>
											</th>
											<th colspan="4">
											</th>
										</tr>
									<!--第三个tr结束 -->
									</table>
									
									<header>
                                	<h3>
                                		<strong>明细信息</strong>
                               		    <a class="btn btn-primary " ng-hide="isNotEdit" ng-click="addRow()" ng-show="addRowButtonShow"><i class="fa fa-plus"></i>明细</a>
                               		</h3>
                          		</header>
                                	<table class="table table-striped table-bordered table-hover"  >
										<thead>
												<tr>
													<th data-hide="expand" align="center" width="4%">序号</th>
													<th data-hide="expand" align="center" width="10%">粮油品种</th>
													<th data-hide="expand" align="center" width="14%">明细品种</th>
													<th data-hide="expand" align="center" width="6%">数量(公斤)</th>
													<th data-hide="expand" align="center" width="9%">操作</th>
												</tr>
												</thead>
												<tbody>
												<tr ng-repeat="detailInfo in addedDetail">
													<td>{{$index + 1}}</td>
													<td>{{dicData[detailInfo.grainKind]}}</td>
													<td>{{dicData[detailInfo.grainDetailKind]}}</td>
													<td>{{detailInfo.inCount}}</td>
													<td>
														<a class="btn btn-primary" ng-hide="isNotEdit" ng-click="editRow(detailInfo)">编辑</a>
	                                                	<a class="btn btn-primary" ng-hide="isNotEdit" ng-click="deleteRow(detailInfo)">删除</a>
													</td>
												</tr>
												</tbody>
		                             </table>
		                             <fieldset>
		                             	<table>
                          					<tbody>
                          						<tr>
                          							<th>
                          								<label label class="label" style="margin-top: 9px;text-align: center;">合同数量(公斤):<span style="color: red;">*</span></label>
                          							</th>
                          							<th >
														<section>
				                                            <label class="input" style="margin-top:8px"> 
		                                                <input class="form-control" type="text" ng-model="contract.grainQuantity" ng-readonly="true" name="grainQuantity">
		                                            </label>
				                                        </section>
											        </th>
                          						</tr>
                          					</tbody>
                          			</table>
		                             
		                             
		                             </fieldset>
									
									<header>
                                	<h3>
                                		<strong>客户信息</strong>
                               		</h3>
                          		</header>
									<table class="table table-striped table-bordered table-hover" >
										<!--第十个tr开始 -->
										<tr>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">客户名称<span style="color: red;">*</span></label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input class="form-control" type="text" ng-model="contract.customerName" name="customerName" ng-readonly="true" ng-click="getCustomer()"
		                                                placeholder="请选择客户" required>
		                                            </label>
		                                        </section>
											</th>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">客户编号</label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input class="form-control" type="text" ng-model="contract.customerNumber" name="customerNumber" ng-readonly="true" placeholder="" >
		                                            </label>
		                                        </section>
											</th>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">客户联系方式</label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input class="form-control" type="text" ng-model="contract.mobile" name="mobile" ng-readonly="true" placeholder="" >
		                                            </label>
		                                        </section>
											</th>
										</tr>
										<!--第十个tr结束 -->
										<!--第十一个tr开始 -->
										<tr>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">开户行名称</label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input class="form-control" type="text" ng-model="contract.bankName" name="bankName" ng-readonly="true" placeholder="">
		                                            </label>
		                                        </section>
											</th>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">银行账户名称</label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input class="form-control" type="text" ng-model="contract.accountName" name="accountName" ng-readonly="true" placeholder="">
		                                            </label>
		                                        </section>
											</th>
											<th>
												<label class="label" style="margin-top: 9px;text-align: center;">开户账号</label>
											</th>
											<th>
												<section>
		                                            <label class="input"> 
		                                                <input class="form-control" type="text" ng-model="contract.accountNumber" name="accountNumber" ng-readonly="true" placeholder="">
		                                            </label>
		                                        </section>
											</th>
										</tr>
										<!--第十一个tr结束 -->
										<!--第十二个tr开始 -->
										<tr>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">违约责任</label>
											</th>
											<th colspan="5">
												<section>
	                                                <label class="textarea">
	                                                    <textarea class="form-control" ng-model="contract.breachLiability" name="breachLiability" ng-readonly="isNotEdit" oninput="if(value.length>100) value=value.slice(0,100)" rows="2" data-bv-field="review"></textarea>
	                                                </label>
	                                            </section>
											</th>
										</tr>
										<!--第十二个tr结束 -->
										<!--第十三个tr开始 -->
										<tr>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">解除条件</label>
											</th>
											<th colspan="5">
												<section>
	                                                <label class="textarea">
	                                                    <textarea class="form-control" ng-model="contract.dissolutionConditions" name="dissolutionConditions" ng-readonly="isNotEdit" oninput="if(value.length>100) value=value.slice(0,100)" rows="2" data-bv-field="review"></textarea>
	                                                </label>
	                                            </section>
											</th>
										</tr>
										<!--第十三个tr结束 -->
										<!--第十四个tr开始 -->
										<tr>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">争议解决方式</label>
											</th>
											<th colspan="5">
												<section>
	                                                <label class="textarea">
	                                                    <textarea class="form-control" ng-model="contract.disputeSettlementMethod" name="disputeSettlementMethod" ng-readonly="isNotEdit" oninput="if(value.length>100) value=value.slice(0,100)" rows="2" data-bv-field="review"></textarea>
	                                                </label>
	                                            </section>
											</th>
										</tr>
										<!--第十四个tr结束 -->
										<!--第十五个tr开始 -->
										<tr>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">合同备注</label>
											</th>
											<th colspan="5">
												<section>
	                                                <label class="textarea">
	                                                    <textarea class="form-control" ng-model="contract.remark" name="remark" ng-readonly="isNotEdit" oninput="if(value.length>100) value=value.slice(0,100)" rows="2" data-bv-field="review"></textarea>
	                                                </label>
	                                            </section>
											</th>
										</tr>
										<!--第十五个tr结束 -->
										
										<!--第十六1个tr开始 -->
									</table>
									
									<header>
                                	<h3>
                                		<strong>附件信息</strong>
                                		<a href-void class="btn btn-primary" ng-hide="isNotEdit" ng-click="addFile()"> <i class="fa fa-plus"></i>文件 </a>
                               		</h3>
                          		</header>
					            <fieldset>
						            
                                	<table ng-hide="isNotEdit" class="table table-striped table-bordered table-hover" ng-repeat="linenumber in linenumbers" ng-click="clickFileInput(linenumber)" >
		                                <!--第四3个tr开始 -->
										<tr>
											<th width='10%' >
												<label class="label" style="margin-top: 9px;text-align: center;">附件</label>
											</th>
											<th colspan="4">
												<section>
									            	<div class="input input-file" style="margin-top: 9px; text-align: center; margin-right: 22px;">
											            <span class="button" >
											            	<input type="file" nv-file-select="" uploader="uploader" accept="*" options="id" id="fileInputId{{linenumber}}"
											            		onchange="if (this.value != '')this.parentNode.nextSibling.value = this.value">
											                	上传
											            </span><input type="text" name="imgUrl" placeholder="" readonly="">
										        	</div>
									            </section>
											</th>
											<th width='10%' class="text-align-center">
													<div class="input input-file" style="margin-top: 9px; text-align: center; margin-right: 16px;">
														<span class="button"  ng-click="showFileByLinenumber(linenumber)">预览
											            </span>
													</div>
													<!-- <button type="button" style="margin-top: 9px; text-align: center; margin-right: 22px;" class="btn btn-primary" ng-click="deleteFileByLinenumber(linenumber)">删除
													</button> -->
											</th>
											
											<th width='10%'>
	                                                <!-- <span class="button" style="margin-top: 9px; text-align: center; margin-right: 22px;" ng-click="deleteFileByLinenumber(linenumber)">删除
										            </span> -->
										            <div class="input input-file" style="margin-top: 9px; text-align: center; margin-right: 16px;">
														<span class="button"  ng-click="deleteFileByLinenumber(linenumber)">删除
											            </span>
													</div>
											</th>
											
										</tr>
										<!--第四3个tr结束 -->
		                             </table>
                                
                                	<!--回显文件的表格  -->
                                	
                                	<table class="table table-striped table-bordered table-hover" ng-repeat="file in fileList" >
		                                <!--第四3个tr开始 -->
										<tr>
											<th width='10%' >
												<label class="label" style="margin-top: 9px;text-align: center;">附件</label>
											</th>
											<th colspan="5">
												<section >
										            <input class="form-control" type="text" ng-model="file.originalFileName" readonly="">
		                                		</section>
											</th>
											<th width='10%' >
												<section style="margin-top: 9px; text-align: center; margin-right: 22px;">
							                        <a class="btn btn-default" href-void ng-click="download(file.filePath, file.originalFileName)"><i class="fa fa-download"></i>下载</a>
		                                		</section>
											</th>
											
											<th width='10%'>
												<section style="margin-top: 9px; text-align: center; margin-right: 22px;">
							                        <a class="btn btn-default" href-void ng-click="showFile(file.filePath)"><i class="fa fa-download"></i>预览</a>
		                                		</section>
											</th>
											<th width='10%'>
												<section  ng-hide="isNotEdit" style="margin-top: 9px; text-align: center; margin-right: 22px;">
							                        <a class="btn btn-default" href-void ng-click="deleteFile(file)"><i class="fa fa-trash-o"></i>删除</a>
		                                		</section>
											</th>
											
										</tr>
										<!--第四3个tr结束 -->
		                             </table>
		                             </fieldset>
		                             
									
									<header>
                                	<h3>
                                		<strong>变更信息</strong>
                               		</h3>
                          		</header>
									<table class="table table-striped table-bordered table-hover" >
										<tr>
											<th >
												<label label class="label" style="margin-top: 9px;text-align: center;">合同变更原因<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
											</th>
											<th colspan="5">
												<section>
		                                            <label class="textarea">
		                                                <textarea class="form-control" ng-model="contract.changeReason" name="changeReason" ng-readonly="isNotEdit" oninput="if(value.length>100) value=value.slice(0,100)" rows="2" data-bv-field="review" required></textarea>
		                                            </label>
		                                        </section>
											</th>
											
										</tr>
										<!--第十六1个tr结束 -->
										<!--第十七1个tr开始 -->
										<tr>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">合同变更内容<span style="color: red;margin-left: 5px;text-align: center;">*</span></label>
											</th>
											<th colspan="5">
												<section>
		                                            <label class="textarea">
		                                                <textarea class="form-control" ng-model="contract.changeContent" name="changeContent" ng-readonly="isNotEdit" oninput="if(value.length>100) value=value.slice(0,100)" rows="2" data-bv-field="review" required></textarea>
		                                            </label>
		                                        </section>
											</th>
										</tr>
										<!--第十七1个tr结束 -->
										
										<!--第十八个tr开始 -->
										<tr ng-hide="!isNotEdit">
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">创建信息</label>
											</th>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">创建时间</label>
											</th>
											<th colspan="2">
												<section>
		                                            <label class="input" style="margin-top: 9px;">
		                                            	{{ contract.createTime | date:'yyyy-MM-dd HH:mm:ss' }}
		                                            </label>
		                                        </section>
											</th>
											<th>
												<label label class="label" style="margin-top: 9px;text-align: center;">创建人</label>
											</th>
											<th colspan="2">
												<section>
		                                            <label class="input" style="margin-top: 9px;"> 
		                                            	{{ contract.createMan }}
		                                            </label>
		                                        </section>
											</th>
										</tr>
										<!--第十八个tr结束 -->
									</table>
                                </table>
                                </fieldset>
                                
                                <header ng-hide="changeDetailListHide"><h3><strong>历次更改信息</strong></h3></header>
                                <fieldset>
                                    <div class="form-group has-feedback"  ng-hide="changeDetailListHide">
                                        <table class="table table-striped table-bordered table-hover" width="100%">
                                             <thead>
                                              <tr>
                                                  <th data-hide="expand"><i class="fa fa-fw  text-muted hidden-md hidden-sm hidden-xs"></i>更改时间</th>
                                                  <th data-class="expand"><i class="fa fa-fw  text-muted hidden-md hidden-sm hidden-xs"></i>更改原因</th>
                                                  <th data-class="expand"><i class="fa fa-fw  text-muted hidden-md hidden-sm hidden-xs"></i>更改内容</th>
                                              </tr>
                                             </thead>
                                             <tbody>
                                                 <tr ng-repeat="changeDetail in changeDetailList">
                                                     <td>{{changeDetail.changeTime | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                                                     <td>{{changeDetail.changeReason}}</td>
                                                     <td>{{changeDetail.changeContent}}</td>
                                                 </tr>
                                             </tbody>
                                        </table>
                                    </div>
                                </fieldset>
                                
                                
                                <div ng-include="'app/act/util/historyList-audit.html'"></div>
                            </form>
                        </div>
                    </div>
            </article>
        </div>
    </section>
    <form id="download-form" method="post" target="_blank" style=" border-width:5px; margin-left:2%;position:relative;margin-right:2%;">
		<input type="hidden" name="filePath" id="filePath">
		<input type="hidden" name="originalFileName" id="originalFileName">
		<input type="hidden" name="type" id="type">
	</form>
</div>
